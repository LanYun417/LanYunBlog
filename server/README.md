# ğŸ’ NodeJS æ¥å£æœåŠ¡é¡¹ç›®æ¨¡æ¿

## ğŸ“¢ é¡¹ç›®ä»‹ç»

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº Node.js çš„æ¥å£æœåŠ¡é¡¹ç›®æ¨¡æ¿ï¼Œä¸»è¦ç”¨äºå¿«é€Ÿæ­å»ºä¸€ä¸ªåŸºäº RESTful API çš„æœåŠ¡ã€‚é¡¹ç›®å·²å†…ç½®éƒ¨åˆ†ä¸­é—´ä»¶ï¼Œå¦‚æ—¥å¿—è®°å½•ã€æ–‡ä»¶ä¸Šä¼ ã€è·¯ç”±ã€æ•°æ®åº“è¿æ¥ç­‰ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚

## âœ¨ æ›´æ–°æ—¥å¿—

- 2024-08-21ï¼šæ›´æ–°é¡¹ç›®ç»“æ„ï¼Œæ–°å¢æ¥å£æ–‡æ¡£ç”Ÿæˆå·¥å…· apidocã€‚

## ğŸ¯ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ apidoc
â”œâ”€â”€ config
â”‚   â”œâ”€â”€ db.config.ts
â”‚   â”œâ”€â”€ log4js.config.ts
â”‚   â””â”€â”€ swagger.config.ts
â”œâ”€â”€ logs
â”‚   â”œâ”€â”€ db.log
â”‚   â”œâ”€â”€ error.log
â”‚   â””â”€â”€ info.log
â”œâ”€â”€ public
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ sql
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ express
â”‚   â”œâ”€â”€ middleware
â”‚   â”œâ”€â”€ models
â”‚   â”œâ”€â”€ router
â”‚   â””â”€â”€ utils
â”œâ”€â”€ upload
â”œâ”€â”€ .env
â”œâ”€â”€ apidoc.json
```

```
1. apidoc æ¥å£æ–‡æ¡£

2. `config`ï¼šé…ç½®æ–‡ä»¶ç›®å½•ï¼Œç”¨äºé…ç½®é¡¹ç›®å‚æ•°ã€‚
  2.1 db.config.ts æ•°æ®åº“é…ç½®
  2.2 log4js.config.ts æ—¥å¿—ä¸­é—´ä»¶ï¼ˆlog4jsï¼‰é…ç½®
	2.3 swagger.config.ts Swagger æ¥å£æ–‡æ¡£é…ç½®

3. `logs`ï¼šæ—¥å¿—ç›®å½•ï¼Œç”¨äºè®°å½•æ—¥å¿—ã€‚
  3.1 db.log æ•°æ®åº“æ—¥å¿—
  3.2 error.log é”™è¯¯æ—¥å¿—
  3.3 info.log ä¿¡æ¯æ—¥å¿—

4. `public`ï¼šé™æ€èµ„æºç›®å½•ï¼Œç”¨äºå­˜æ”¾é™æ€æ–‡ä»¶ã€‚
  4.1 index.html é¦–é¡µ

5. `sql`ï¼šæ•°æ®åº“è„šæœ¬ç›®å½•ï¼Œç”¨äºåˆå§‹åŒ–æ•°æ®åº“ã€‚

6. `src`ï¼šæºç ç›®å½•ï¼Œç”¨äºå­˜æ”¾é¡¹ç›®ä»£ç ã€‚
  6.1 express Express æ¡†æ¶å®ä¾‹ä»¥åŠç›¸å…³é…ç½®
  6.2 middlewares ä¸­é—´ä»¶ç›®å½•ï¼Œç”¨äºå¤„ç†è¯·æ±‚å‰åç›¸å…³æ“ä½œ
  6.3 models æ¨¡å‹ç›®å½•ï¼Œç”¨äºå®šä¹‰æ•°æ®æ¨¡å‹
  6.4 router è·¯ç”±ç›®å½•ï¼Œç”¨äºå®šä¹‰æ¥å£è·¯ç”±
  6.5 utils å·¥å…·ç›®å½•ï¼Œç”¨äºå®šä¹‰å·¥å…·å‡½æ•°

7. `upload`ï¼šä¸Šä¼ æ–‡ä»¶ç›®å½•ï¼Œç”¨äºå­˜æ”¾ä¸Šä¼ çš„æ–‡ä»¶ã€‚

8. `.env`ï¼šç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œç”¨äºé…ç½®ç¯å¢ƒå˜é‡ã€‚

9. `index.ts`ï¼šå…¥å£æ–‡ä»¶ï¼Œç”¨äºå¯åŠ¨æœåŠ¡ã€‚

10. `apidoc.json`ï¼šæ¥å£æ–‡æ¡£é…ç½®æ–‡ä»¶ã€‚
```

## â™¾ï¸ é¡¹ç›®ä¾èµ–

```json
{
	"dependencies": {
		"cookie-parser": "^1.4.6",
		"cors": "^2.8.5",
		"dotenv": "^16.4.5",
		"express": "^4.19.2",
		"jsonwebtoken": "^9.0.2",
		"log4js": "^6.9.1",
		"morgan": "^1.10.0",
		"multer": "^1.4.5-lts.1",
		"mysql2": "^3.10.2",
		"sequelize": "^6.37.3"
	},
	"devDependencies": {
		"@types/cookie-parser": "^1.4.7",
		"@types/cors": "^2.8.17",
		"@types/express": "^4.17.21",
		"@types/jsonwebtoken": "^9.0.6",
		"@types/morgan": "^1.9.9",
		"@types/multer": "^1.4.11",
		"apidoc": "^1.2.0",
		"nodemon": "^3.1.4",
		"ts-node": "^10.9.2",
		"tsconfig-paths": "^4.2.0",
		"typescript": "^5.5.3"
	}
}
```

## \*ï¸âƒ£ é¡¹ç›®ä½¿ç”¨

### å®‰è£…ä¾èµ–

```
npm install
```

### å¯åŠ¨æœåŠ¡

```
ç›´æ¥å¯åŠ¨
npm start

é¡¹ç›®çƒ­å¯åŠ¨
npm run dev
```

### è®¿é—®æ¥å£

```
http://localhost:3000/
æˆ–
http://localhost:3000/api/user/getUser
æµè§ˆå™¨èƒ½å¤ŸæˆåŠŸè®¿é—®è¯´æ˜æœåŠ¡å·²å¯åŠ¨æˆåŠŸã€‚
```

### æ¥å£æ–‡æ¡£

```
http://localhost:3000/apiDoc/

apiDoc ä½¿ç”¨æ–‡æ¡£
https://apidocjs.com/
```

## ğŸ¼ é¡¹ç›®é…ç½®

### ç«¯å£å·

```
.env

# æ¥å£è¿è¡Œç«¯å£
SERVER_PORT=3000

# æ¥å£åŸŸå || åœ°å€
SERVER_HOST=http://localhost:3000

# Token å¯†é’¥
TOKEN_SECRET=secret
```
